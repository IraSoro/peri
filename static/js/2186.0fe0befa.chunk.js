"use strict";(self.webpackChunkperi=self.webpackChunkperi||[]).push([[2186],{4847:function(e,t,n){n.r(t),n.d(t,{startInputShims:function(){return g}});var o=n(5971),i=n(4012),r=n(4852),u=n(8527),a=n(3023),c=(n(5892),new WeakMap),d=function(e,t,n,o,i){void 0===o&&(o=0),void 0===i&&(i=!1),c.has(e)!==n&&(n?s(e,t,o,i):l(e,t))},s=function(e,t,n,o){void 0===o&&(o=!1);var i=t.parentNode,r=t.cloneNode(!1);r.classList.add("cloned-input"),r.tabIndex=-1,o&&(r.disabled=!0),i.appendChild(r),c.set(e,r);var u="rtl"===e.ownerDocument.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform="translate3d(".concat(u,"px,").concat(n,"px,0) scale(0)")},l=function(e,t){var n=c.get(e);n&&(c.delete(e),n.remove()),e.style.pointerEvents="",t.style.transform=""},v="input, textarea, [no-blur], [contenteditable]",f=function(e,t,n,o){var i=e.top,r=e.bottom,u=t.top,a=u+15,c=Math.min(t.bottom,o-n)-50-r,d=a-i,s=Math.round(c<0?-c:d>0?-d:0),l=Math.min(s,i-u),v=Math.abs(l)/.3;return{scrollAmount:l,scrollDuration:Math.min(400,Math.max(150,v)),scrollPadding:n,inputSafeY:4-(i-a)}},m="$ionPaddingTimer",h=function(e,t,n){var o=e[m];o&&clearTimeout(o),t>0?e.style.setProperty("--keyboard-offset","".concat(t,"px")):e[m]=setTimeout((function(){e.style.setProperty("--keyboard-offset","0px"),n&&n()}),120)},w=function(e,t,n){e.addEventListener("focusout",(function(){t&&h(t,0,n)}),{once:!0})},b=0,p="data-ionic-skip-scroll-assist",y=function(e){document.activeElement!==e&&(e.setAttribute(p,"true"),e.focus())},E=function(e,t,n,u,a,c,s,l,v){return void 0===s&&(s=!1),void 0===l&&(l=0),void 0===v&&(v=!0),(0,o.mG)(void 0,void 0,void 0,(function(){var m,p,E,g,S,L;return(0,o.Jh)(this,(function(D){switch(D.label){case 0:return n||u?(m=function(e,t,n,o){var i,r=null!==(i=e.closest("ion-item,[ion-item]"))&&void 0!==i?i:e;return f(r.getBoundingClientRect(),t.getBoundingClientRect(),n,o)}(e,n||u,a,l),n&&Math.abs(m.scrollAmount)<4?(y(t),c&&null!==n&&(h(n,b),w(t,n,(function(){return b=0}))),[2]):(d(e,t,!0,m.inputSafeY,s),y(t),(0,r.r)((function(){return e.click()})),c&&n&&(b=m.scrollPadding,h(n,b)),"undefined"===typeof window?[3,3]:(E=function(){return(0,o.mG)(void 0,void 0,void 0,(function(){return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return void 0!==p&&clearTimeout(p),window.removeEventListener("ionKeyboardDidShow",g),window.removeEventListener("ionKeyboardDidShow",E),n?[4,(0,i.c)(n,0,m.scrollAmount,m.scrollDuration)]:[3,2];case 1:o.sent(),o.label=2;case 2:return d(e,t,!1,m.inputSafeY),y(t),c&&w(t,n,(function(){return b=0})),[2]}}))}))},g=function(){window.removeEventListener("ionKeyboardDidShow",g),window.addEventListener("ionKeyboardDidShow",E)},n?[4,(0,i.g)(n)]:[3,2]))):[2];case 1:if(S=D.sent(),L=S.scrollHeight-S.clientHeight,v&&m.scrollAmount>L-S.scrollTop)return"password"===t.type?(m.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",g)):window.addEventListener("ionKeyboardDidShow",E),p=setTimeout(E,1e3),[2];D.label=2;case 2:E(),D.label=3;case 3:return[2]}}))}))},g=function(e,t){return(0,o.mG)(void 0,void 0,void 0,(function(){var n,c,s,l,f,m,h,w,b,y,g,S,L,D,k,A,M;return(0,o.Jh)(this,(function(K){switch(K.label){case 0:return n=document,c="ios"===t,s="android"===t,l=e.getNumber("keyboardHeight",290),f=e.getBoolean("scrollAssist",!0),m=e.getBoolean("hideCaretOnScroll",c),h=e.getBoolean("inputBlurring",c),w=e.getBoolean("scrollPadding",!0),b=Array.from(n.querySelectorAll("ion-input, ion-textarea")),y=new WeakMap,g=new WeakMap,[4,u.K.getResizeMode()];case 1:for(S=K.sent(),L=function(e){return(0,o.mG)(void 0,void 0,void 0,(function(){var t,n,c,v,h;return(0,o.Jh)(this,(function(b){switch(b.label){case 0:return[4,new Promise((function(t){return(0,r.c)(e,t)}))];case 1:return b.sent(),t=e.shadowRoot||e,n=t.querySelector("input")||t.querySelector("textarea"),c=(0,i.f)(e),v=c?null:e.closest("ion-footer"),n?(c&&m&&!y.has(e)&&(h=function(e,t,n){if(!n||!t)return function(){};var o=function(n){(function(e){return e===e.getRootNode().activeElement})(t)&&d(e,t,n)},i=function(){return d(e,t,!1)},u=function(){return o(!0)},a=function(){return o(!1)};return(0,r.a)(n,"ionScrollStart",u),(0,r.a)(n,"ionScrollEnd",a),t.addEventListener("blur",i),function(){(0,r.b)(n,"ionScrollStart",u),(0,r.b)(n,"ionScrollEnd",a),t.removeEventListener("blur",i)}}(e,n,c),y.set(e,h)),"date"===n.type||"datetime-local"===n.type||!c&&!v||!f||g.has(e)||(h=function(e,t,n,i,r,c,d,s){void 0===s&&(s=!1);var l=c&&(void 0===d||d.mode===u.a.None),v=!1,f=void 0!==a.w?a.w.innerHeight:0,m=function(o){!1!==v?E(e,t,n,i,o.detail.keyboardHeight,l,s,f,!1):v=!0},h=function t(){v=!1,null===a.w||void 0===a.w||a.w.removeEventListener("ionKeyboardDidShow",m),e.removeEventListener("focusout",t,!0)},w=function(){return(0,o.mG)(void 0,void 0,void 0,(function(){return(0,o.Jh)(this,(function(o){return t.hasAttribute(p)?(t.removeAttribute(p),[2]):(E(e,t,n,i,r,l,s,f),null===a.w||void 0===a.w||a.w.addEventListener("ionKeyboardDidShow",m),e.addEventListener("focusout",h,!0),[2])}))}))};return e.addEventListener("focusin",w,!0),function(){e.removeEventListener("focusin",w,!0),null===a.w||void 0===a.w||a.w.removeEventListener("ionKeyboardDidShow",m),e.removeEventListener("focusout",h,!0)}}(e,n,c,v,l,w,S,s),g.set(e,h)),[2]):[2]}}))}))},D=function(e){var t;m&&((t=y.get(e))&&t(),y.delete(e));f&&((t=g.get(e))&&t(),g.delete(e))},h&&function(){var e=!0,t=!1,n=document,o=function(){t=!0},i=function(){e=!0},u=function(o){if(t)t=!1;else{var i=n.activeElement;if(i&&!i.matches(v)){var r=o.target;r!==i&&(r.matches(v)||r.closest(v)||(e=!1,setTimeout((function(){e||i.blur()}),50)))}}};(0,r.a)(n,"ionScrollStart",o),n.addEventListener("focusin",i,!0),n.addEventListener("touchend",u,!1)}(),k=0,A=b;k<A.length;k++)M=A[k],L(M);return n.addEventListener("ionInputDidLoad",(function(e){L(e.detail)})),n.addEventListener("ionInputDidUnload",(function(e){D(e.detail)})),[2]}}))}))}}}]);
//# sourceMappingURL=2186.0fe0befa.chunk.js.map